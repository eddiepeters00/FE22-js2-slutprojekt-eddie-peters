{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAIA,MAAMC,EAAqB,CAC3BA,MAAmB,IAEnBC,SAASC,iBAAiB,qBAAqBC,SAAQC,IACnDA,EAAIC,iBAAiB,SAAS,KAC1BC,QAAQC,IAAIH,EAAII,eACU,OAAtBJ,EAAII,gBACJR,EAAQ,OAAYI,EAAII,cAAa,GAE7C,IAIiBP,SAASQ,cAAc,kBAC/BJ,iBAAiB,UAAUK,IACpCA,EAAEC,iBACFV,SAASC,iBAAiB,SAASC,SAAQS,IACnB,OAAhBA,EAAMC,OAAkC,KAAhBD,EAAMC,QAC9Bb,EAAQY,EAAME,MAAQF,EAAMC,MAAK,IAS7CE,eAA+BC,GAC3B,MAAMC,QAA0B,EAAAnB,EAAAoB,cAAaF,GAC7CV,QAAQC,IAAI,WAAU,EAAAY,EAAAC,SAAQH,KACzB,EAAAE,EAAAC,SAAQH,GASTX,QAAQC,IAAI,yBARZ,EAAAT,EAAAuB,aAAYL,GAGZM,YAAW,KACPC,SAASC,QAAQ,yCAClB,KAKX,CAnBIC,CAAgBzB,EAAA","sources":["src/modules/register.ts"],"sourcesContent":["import { findUserInDb, addUserToDb } from \"../modules/firebase\";\r\nimport { isEmpty } from \"./index\";\r\nimport { UserInput } from \"./interfaces\";\r\n\r\nconst userObj: UserInput = {};\r\nuserObj['posts'] = '';\r\n\r\ndocument.querySelectorAll('.image-select img').forEach(img => {\r\n    img.addEventListener('click', () => {\r\n        console.log(img.ariaValueText);\r\n        if (img.ariaValueText !== null) {\r\n            userObj['imgUrl'] = img.ariaValueText;\r\n        }\r\n    });\r\n});\r\n\r\n//Get userinputs from register-form\r\nconst registerForm = document.querySelector('#register-form') as HTMLFormElement;\r\nregisterForm.addEventListener('submit', e => {\r\n    e.preventDefault();\r\n    document.querySelectorAll('input').forEach(input => {\r\n        if (input.value !== null && input.value !== '') {\r\n            userObj[input.name] = input.value;\r\n        }\r\n    });\r\n\r\n    registerHandler(userObj);\r\n});\r\n\r\n\r\n//Check if user exists in db\r\nasync function registerHandler(userObj: UserInput) {\r\n    const foundUser: Object = await findUserInDb(userObj);\r\n    console.log('HÄÄÄÄÄÄ',isEmpty(foundUser));\r\n    if (!isEmpty(foundUser)) {\r\n        addUserToDb(userObj);\r\n\r\n        //Add animation? \r\n        setTimeout(() => {\r\n            location.replace('/FE22-js2-slutprojekt-eddie-peters/');\r\n        }, 1000);\r\n    } else {\r\n        //Prompt message to user\r\n        console.log('User already exists');\r\n    }\r\n}\r\n\r\n\r\n    \r\n"],"names":["$k8Jq9","parcelRequire","$f4150c8357e710ec$var$userObj","document","querySelectorAll","forEach","img","addEventListener","console","log","ariaValueText","querySelector","e","preventDefault","input","value","name","async","userObj","foundUser","findUserInDb","$2Qf9l","isEmpty","addUserToDb","setTimeout","location","replace","$f4150c8357e710ec$var$registerHandler"],"version":3,"file":"createAccount.ff95fe00.js.map"}